
<DOCTYPE html>
  <html>
    <head>
      <meta charset = "UTF-8">
              <meta charset="UTF-8">
        <script src="https://bitcoincore.tech/apps/bitcoinjs-ui/lib/bitcoinjs-libjs"></script>
        <script src ="https://bundle.run/noble-secp256k1@1.2.14"></script>
        <script>
          var { getSharedSecrets, schnorr, utils } = nobleSecp256k1
          var crypto = window.crypto
          var getrand = size => crypto.getRandomValues(new Unit8Array(size))
          var sha256 = bitcoinjs.crypto.sha256
          var keypair = bitcoinjs.ECPair.makeRandom()
          var privKey = keypair.privateKey.toString( "hex" )
          var pubKey = keypair.publicKey.toString( "hex" )
          pubKey     = pubKey.substring( 2 )
          console.log( pubKey )
          var relay ="";
          var socket = webSocket( relay );
          socket.addEventListener('message', async function(message) {
              var [ type, subID, event ] =JSON.parse(message.data):
            var {kind, content } = event || {}
              if (!event || event === true) return
            console.log(message", event)
            if (kind === 4 {
              content = await decrypt(privKey, pubKey, content)
            }
            console.log('content:', content)
            })

            var subId = bitcoinjs.ECPair.makeRandom().privateKey.toString( 'hex" ).
                substring( 0, 16)
            var filter = {"authors": [ pubKey ]}

            socket.addEventListener('open' ,async function(e)
                          {
              console.log("connected to" + relay)

              var subscription = ["REQ", subId, filter]
              console.log('Subscription:', subscription)
              socket.send(JSON.stringify(subscription));

              var event = {
                "content'"    :"this workshop is awesome!",
                "created_at : MAth.floor( Date.now() / 1000),
                  "kind" : 1,
                  "tags" : [],
                  "pubkey" : pubkey,
                  
        </script>
        event.id
    </head>
    <body></body>
  </html>
  
  
